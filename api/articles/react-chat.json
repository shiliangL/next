{"title":"更好的理解react-redux","slug":"react-chat","date":"2018-11-21T10:06:15.000Z","updated":"2018-11-30T14:58:57.000Z","comments":true,"path":"api/articles/react-chat.json","photos":[],"link":"","excerpt":"","covers":null,"content":"<ul>\n<li><p>react全家桶,更好的理解redux,用装饰器的写法使用 react-redux，socket-io即时通信</p>\n</li>\n<li><p>本文基于MacOS系统,基本的开发环境安装配置如果没有\b安装好请自行百度安装</p>\n<!-- ### ----------前后端配置安装（MacOS）------------- -->\n</li>\n</ul>\n<h5 id=\"后台数据库mongoDB安装\"><a href=\"#后台数据库mongoDB安装\" class=\"headerlink\" title=\"后台数据库mongoDB安装\"></a>后台数据库mongoDB安装</h5><blockquote>\n<p>使用homebrew安装mongodb</p>\n<ul>\n<li>brew install mongodb</li>\n<li>mongo –version 查看安装版本</li>\n<li>新版开箱即用，不用像之前要配什么DB文件了（系统环境可能需要配置一下）</li>\n<li>已默认配置启动 mongod –config /usr/local/etc/mongod.conf</li>\n<li>mongo 图形界面</li>\n<li>推荐界面管理工具 <a href=\"https://robomongo.org/\" target=\"_blank\" rel=\"noopener\">RoBo3T</a></li>\n</ul>\n</blockquote>\n<!-- ![RoBo3T](./screenshots/RoBo3T.png) -->\n<ul>\n<li>后台启动mongodb用工具成功连接数据库</li>\n</ul>\n<h5 id=\"后端基于node-express开发-后台代码-service文件夹中\"><a href=\"#后端基于node-express开发-后台代码-service文件夹中\" class=\"headerlink\" title=\"后端基于node,express开发,后台代码-service文件夹中\"></a>后端基于node,express开发,后台代码-service文件夹中</h5><blockquote>\n<p>本地后台服务开发调试 nodemon 启动后台(后台代码更新自动重启服务器)\b,安装<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\bnpm install -g nodemon</span><br></pre></td></tr></table></figure></div></p>\n</blockquote>\n<blockquote>\n<p>数据库mongodb,mongodb配合express使用需要插件mongoose<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i mongoose -S</span><br></pre></td></tr></table></figure></div></p>\n</blockquote>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const mongoose = require(&apos;mongoose&apos;)</span><br><span class=\"line\">const DB_URL = &apos;mongodb://127.0.0.1:27017/cmm&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">//链接数据库</span><br><span class=\"line\">mongoose.connect(DB_URL)</span><br><span class=\"line\">mongoose.connection.on(&apos;connected&apos;, () =&gt; &#123;</span><br><span class=\"line\">  console.log(&apos;数据库链接成功&apos;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></div>\n<!-- ### --------------界面-------------- -->\n<!-- ![登录页面](./screenshots/login.png) -->\n<!-- ### --------------前端开发-------------- -->\n<p>-安装依赖<br>-配置redeux开发调试<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; Provider &#125; from &apos;react-redux&apos;</span><br><span class=\"line\">import &#123; createStore,applyMiddleware,compose &#125; from &apos;redux&apos;</span><br><span class=\"line\">import thunk from &apos;redux-thunk&apos;</span><br><span class=\"line\">import App from &apos;./App&apos;;</span><br><span class=\"line\">import &#123; AppStore &#125; from &apos;@/store&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">let store = createStore(rootReducer,</span><br><span class=\"line\">compose(</span><br><span class=\"line\">    applyMiddleware(thunk),</span><br><span class=\"line\">    window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">  )  </span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  document.getElementById(&apos;root&apos;)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></div></p>\n<ul>\n<li>使用 connect 链接 组件与 状态中心, connect接收两个参数（其实有4个参数）<blockquote>\n<p>1-映射数据 可以理解为 state<br>2-映射方法 </p>\n</blockquote>\n</li>\n</ul>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; connect &#125; from &quot;react-redux&quot;;</span><br><span class=\"line\">@connect(</span><br><span class=\"line\">  (state) =&gt; (state.user),</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    userRegisger</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\">class Register extends Component &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  render()&#123;</span><br><span class=\"line\">    return null</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">用装饰器的\b写法确实比之前的写法更简洁了</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"create-react-app-中使用装饰器\"><a href=\"#create-react-app-中使用装饰器\" class=\"headerlink\" title=\"create-react-app 中使用装饰器\"></a>create-react-app 中使用装饰器</h3><p>安装<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save-dev @babel/plugin-proposal-decorators</span><br><span class=\"line\">配置（ npm run eject )</span><br><span class=\"line\">  &quot;babel&quot;: &#123;</span><br><span class=\"line\">    &quot;presets&quot;: [</span><br><span class=\"line\">      &quot;react-app&quot;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &quot;plugins&quot;: [</span><br><span class=\"line\">      [</span><br><span class=\"line\">        &quot;@babel/plugin-proposal-decorators&quot;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;legacy&quot;: true</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      [</span><br><span class=\"line\">        &quot;import&quot;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;libraryName&quot;: &quot;antd&quot;,</span><br><span class=\"line\">          &quot;style&quot;: &quot;css&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure></div></p>\n<!-- ### --------------服务器后台-------------- -->\n<blockquote>\n<p>基于node,express开发</p>\n</blockquote>\n<ul>\n<li>app.get,app.post,开发get和post接口</li>\n<li>app.use使用模块</li>\n<li>res.send;res.json;res.sendfile</li>\n</ul>\n<blockquote>\n<p>mongodb配合express进阶</p>\n</blockquote>\n<ul>\n<li><p>mongodb独立工具函数</p>\n</li>\n<li><p>express使用body-parser支持post参数</p>\n</li>\n<li><p>使用cookie-parser储存登录信息cookie</p>\n</li>\n</ul>\n<blockquote>\n<p>密码 cmd5加密+加严 安装 npm i utility -S</p>\n</blockquote>\n<!-- ### node后台服务器开启调试模式nodemon --inspect-brk app.js -->","categories":[],"tags":[{"name":"react","slug":"react","count":2,"path":"api/tags/react.json"}]}